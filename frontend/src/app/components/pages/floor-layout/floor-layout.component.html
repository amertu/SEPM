<h1 style="margin-top: 1rem">Floorplan</h1>
<div *ngIf="authService.isLoggedIn() && authService.isAdmin()" class="container mt-3">
  <div class="row">
    <button class="btn" (click)="editWalls()">
      <i class="fas fa-expand-arrows-alt"></i> Edit Walls
    </button>
    <button *ngIf="editingWalls && !enoughPoints()" class="btn" (click)="splitPoints()">
      <i class="fas fa-draw-polygon"></i> Split Points
    </button>
    <button *ngIf="editingWalls && enoughPoints()" class="btn" disabled>
      <i class="fas fa-draw-polygon"></i> Split Points
    </button>
    <button *ngIf="editingWalls" class="btn" data-toggle="modal" data-target=".resetWallsModal">
      <i class="fas fa-vector-square"></i> Reset walls
    </button>
    <button class="btn" (click)="openAddTableForm()">
      <i class="fas fa-plus"></i> Add Table
    </button>
    <button class="btn" (click)="saveLayout()">
      <i class="fas fa-save"></i> Save Layout
    </button>
  </div>
  <span *ngIf="layoutEdited" class="unsaved">
    <b>The floorplan has been edited! Save your changes, else they will be lost when leaving/refreshing the page!</b>
  </span>
  <span *ngIf="!layoutEdited">
    <br>
  </span>
</div>

<div class="container mt-3 canvasContainer">
  <canvas id="c"></canvas>
</div>

<app-table [tables]="tableList" (updateTables)="onUpdateTables($event)"></app-table>

<div class="modal fade resetWallsModal" tabindex="-1" role="dialog" aria-labelledby="Reset walls modal"
     aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Reset walls</h5>
        <button type="button" class="close btn" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body bg-dark text-white">
        <p>Do you want to reset the walls?</p>
      </div>
      <div class="modal-footer bg-dark text-white">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="resetWalls()" data-dismiss="modal">Reset</button>
      </div>
    </div>
  </div>
</div>
